<div class="row">
  <h2 class="section-title">Upcoming Events</h2>
  <hr>

  <p><strong>Stay tuned for more to come!</strong></p>
  <br>

  <%# events are assumed to be in reverse chronological order - newest first %>
  <div class="events">
    <% @events.reverse_each do |event| %>
      <% next if event[:date] < Date.today %>
      <% extra_classes = [] %>
      <% extra_classes << '--link' if event[:link].present? %>
      <%= content_tag (event[:link] ? :a : :div), class: 'event-calendar ' + extra_classes.join(' '), href: event[:link], target: "_blank" do %>
        <h4><%= event[:date].strftime('%b') %></h4>
        <p><%= event[:date].strftime('%-d') %></p>
      <% end %>
      <%= content_tag (event[:link] ? :a : :div), class: 'event-details ' + extra_classes.join(' '), href: event[:link], target: "_blank" do %>
        <h4 class="event-title"><strong><%= event[:title] %></strong> <%= event[:subtitle] %></h4>
        <% unless event[:time].to_s == '' %>
          <p><%= event[:time] %></p>
        <% end %>
        <p><em><%= event[:location] %></em></p>
      <% end %>
    <% end %>
  </div>
</div>

<div class="row">
  <h2 class="section-title">Past Events</h2>
  <hr>

  <div class="events">
    <% @events.each do |event| %>
      <% next unless event[:date] < Date.today %>
      <% extra_classes = ['--past'] %>
      <% extra_classes << '--link' if event[:link].present? %>
      <%= content_tag (event[:link] ? :a : :div), class: 'event-calendar ' + extra_classes.join(' '), href: event[:link], target: "_blank" do %>
        <h4><%= event[:date].strftime('%b') %></h4>
        <p><%= event[:date].strftime('%-d') %></p>
      <% end %>
      <%= content_tag (event[:link] ? :a : :div), class: 'event-details ' + extra_classes.join(' '), href: event[:link], target: "_blank" do %>
        <h4 class="event-title"><strong><%= event[:title] %></strong> <%= event[:subtitle] %></h4>
        <% unless event[:time].to_s == '' %>
          <p><%= event[:time] %></p>
        <% end %>
        <p><em><%= event[:location] %></em></p>
      <% end %>
    <% end %>
  </div>
</div>


<% if false %>
<script type="application/ld+json">
<% @events.each do |event| %>
  <%= render 'jsonld/event.json', event: event %>
<% end %>
</script>
<% end %>